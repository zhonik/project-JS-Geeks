import{S as y,N as L,K as S,a as d,i as u}from"./assets/vendor-BakBz2pg.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function o(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(s){if(s.ep)return;s.ep=!0;const n=o(s);fetch(s.href,n)}})();const a={reviewsList:document.querySelector(".reviews-card-list"),stubReviews:document.querySelector(".reviews-not-found"),reviewsSection:document.querySelector(".reviews"),prevButton:document.querySelector(".reviews-button.swiper-button-prev"),nextButton:document.querySelector(".reviews-button.swiper-button-next"),reviewsBtnBox:document.querySelector(".reviews-btn-box")};let g=!1,w=!1;a.reviewsBtnBox.addEventListener("mousedown",e=>{e.target!==e.currentTarget&&setTimeout(()=>e.target.closest("button").blur(),0)});const h=new y(".reviews-card-container.swiper",{modules:[L,S],slidesPerView:1,speed:1e3,navigation:{nextEl:".reviews-button.swiper-button-next",prevEl:".reviews-button.swiper-button-prev"},spaceBetween:16,breakpoints:{768:{slidesPerView:2},1440:{slidesPerView:4}},keyboard:{enabled:!0,onlyInViewport:!0},on:{slideChange:function(){x(h)}}});E().then(e=>{!e||e.length===0?(v(),w=!0):(q(e),h.update())}).catch(()=>{v(),g=!0});const M=new IntersectionObserver(j,{root:null,threshold:.2});M.observe(a.reviewsSection);async function E(){return d.defaults.baseURL="https://portfolio-js.b.goit.study/api",(await d.get("/reviews")).data}function x(e){e.isBeginning?a.prevButton.setAttribute("disabled","true"):a.prevButton.removeAttribute("disabled"),e.isEnd?a.nextButton.setAttribute("disabled","true"):a.nextButton.removeAttribute("disabled")}function B({author:e,avatar_url:t,_id:o,review:i}){return`<li class="reviews-card-item swiper-slide"
                tabindex="${o-1}"
                aria-label="review ${o}"
              >
                <img
                  class="reviews-card-image"
                  src="${t}"
                  alt="photo of ${e}"
                  width="48"
                  height="48"
                />
                <h3 class="reviews-card-heading">${e}</h3>
                <p class="reviews-card-text">${i}</p>`}function I(e){return e.map(B).join("")}function q(e){const t=I(e);a.reviewsList.innerHTML=t}function v(){a.stubReviews.classList.remove("visually-hidden")}function j(e,t){e.forEach(o=>{o.isIntersecting&&(t.disconnect(),g&&u.error({position:"topRight",message:"Server not responding, please try later"}),w&&u.info({position:"topRight",message:"We're sorry, there are no reviews yet"}))})}const R="/project-JS-Geeks/assets/sprite-BlG_KgII.svg",r={form:document.querySelector(".js-form"),modalBackdrop:document.querySelector(".js-modal-backdrop"),modalWindow:document.querySelector(".js-modal-window"),closeModalButton:document.querySelector(".jd-modal-close-button"),emailInput:document.querySelector(".js-email"),commentInput:document.querySelector(".js-comment"),successMessage:document.querySelector(".js-success-message"),errorMessage:document.querySelector(".js-error-messasge")};r.form.addEventListener("submit",k);r.emailInput.addEventListener("input",P);r.commentInput.addEventListener("blur",T);r.modalWindow.addEventListener("click",e=>{e.target.closest(".js-modal-close-button")&&p()});r.modalBackdrop.addEventListener("click",e=>{e.target===e.currentTarget&&p()});let c="";async function k(e){e.preventDefault();const t=e.target.elements["user-email"].value.trim(),o=e.target.elements["user-comment"].value.trim();if(!t||!o){u.info({message:"Please complete the field"});return}const i={email:t,comment:c};try{const s=await N(i),n=_(s);r.modalWindow.innerHTML=n,s&&(m(),f(),$(),e.target.reset())}catch(s){u.error({message:"Something went wrong. Please, try again"}),console.log(s)}}function P(){const e=this.value,o=new RegExp(this.getAttribute("pattern")).test(this.value);if(e.length===0){m(),f();return}o?(O(),f()):(m(),A())}function T(){c=r.commentInput.value;const e=r.commentInput.getAttribute("data-maxlength"),t=parseInt(e);e&&c.length>e&&(r.commentInput.value=V(c,t))}async function N({email:e,comment:t}){const o="https://portfolio-js.b.goit.study/api/requests",i={email:e,comment:t};try{return(await d.post(o,i)).data}catch(s){console.log(s)}}function $(){r.modalBackdrop.classList.add("is-open"),document.addEventListener("keydown",b),document.body.style.overflow="hidden"}function p(){r.modalBackdrop.classList.remove("is-open"),document.removeEventListener("keydown",b),document.body.style.overflow="auto"}function b(e){e.key==="Escape"&&p()}function O(){r.successMessage.classList.remove("fade-out"),r.successMessage.classList.add("fade-in")}function m(){r.successMessage.classList.remove("fade-in"),r.successMessage.classList.add("fade-out")}function A(){r.errorMessage.classList.remove("fade-out"),r.errorMessage.classList.add("fade-in")}function f(){r.errorMessage.classList.remove("fade-in"),r.errorMessage.classList.add("fade-out")}function V(e,t){if(e.length>t){const o=t-3;return e.slice(0,o)+"..."}return e}function _({title:e,message:t}){return`<button class="modal-close-button js-modal-close-button" type="submit">
            <svg class="icon-modal-close" width="24" height="24">
                 <use xlink:href="${R}#x"></use>
            </svg>
        </button>
        <h2 class="modal-title">${e}</h2>
        <p class="modal-text">${t}</p>`}
//# sourceMappingURL=index.js.map
