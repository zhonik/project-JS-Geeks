import{S as T,N as j,K as C,a as g,i as m}from"./assets/vendor-BvPA-ZqM.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function s(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(t){if(t.ep)return;t.ep=!0;const i=s(t);fetch(t.href,i)}})();document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll(".faq-item");if(e.length===0)return;const n=s=>{e.forEach(r=>{const t=r.querySelector(".faq-answer"),i=r.querySelector(".toggle-btn svg");t&&t!==s&&(Object.assign(t.style,{transform:"scaleY(0)",height:"0",overflow:"hidden",paddingTop:"0",paddingBottom:"0"}),t.classList.remove("open"),i.classList.remove("rotated"))})};e.forEach(s=>{const r=s.querySelector(".faq-header"),t=s.querySelector(".faq-answer"),i=s.querySelector(".toggle-btn svg");!r||!t||!i||r.addEventListener("click",()=>{const a=t.classList.contains("open");if(n(t),a)Object.assign(t.style,{transform:"scaleY(0)",height:"0",overflow:"hidden",paddingTop:"0",paddingBottom:"0"}),t.classList.remove("open"),i.classList.remove("rotated");else{const u=t.scrollHeight+26+0;Object.assign(t.style,{transform:"scaleY(1)",height:`${u}px`,overflow:"visible",paddingTop:"26px",paddingBottom:"0px"}),t.classList.add("open"),i.classList.add("rotated")}})})});const d={prevButton:document.querySelector(".projects-btn.swiper-button-prev"),nextButton:document.querySelector(".projects-btn.swiper-button-next"),projectsBtnBox:document.querySelector(".projects-btn-box")};new T(".projects-container.swiper",{modules:[j,C],slidesPerView:1,speed:1e3,loop:!1,navigation:{nextEl:".projects-btn.swiper-button-next",prevEl:".projects-btn.swiper-button-prev"},spaceBetween:32,keyboard:{enabled:!0,onlyInViewport:!0},on:{init:E,slideChange:E}});d.projectsBtnBox.addEventListener("mousedown",e=>{e.target!==e.currentTarget&&setTimeout(()=>e.target.closest("button").blur(),0)});function E(e){e.isBeginning?d.prevButton.setAttribute("disabled","true"):d.prevButton.removeAttribute("disabled"),e.isEnd?d.nextButton.setAttribute("disabled","true"):d.nextButton.removeAttribute("disabled")}const l={reviewsList:document.querySelector(".reviews-card-list"),stubReviews:document.querySelector(".reviews-not-found"),reviewsSection:document.querySelector(".reviews"),prevButton:document.querySelector(".reviews-button.swiper-button-prev"),nextButton:document.querySelector(".reviews-button.swiper-button-next"),reviewsBtnBox:document.querySelector(".reviews-btn-box")};let M=!1,O=!1;l.reviewsBtnBox.addEventListener("mousedown",e=>{e.target!==e.currentTarget&&setTimeout(()=>e.target.closest("button").blur(),0)});const R=new T(".reviews-card-container.swiper",{modules:[j,C],slidesPerView:1,speed:1e3,navigation:{nextEl:".reviews-button.swiper-button-next",prevEl:".reviews-button.swiper-button-prev"},spaceBetween:16,breakpoints:{768:{slidesPerView:2},1440:{slidesPerView:4}},keyboard:{enabled:!0,onlyInViewport:!0},on:{slideChange:function(){V(R)}}});F().then(e=>{!e||e.length===0?(L(),O=!0):(D(e),R.update())}).catch(()=>{L(),M=!0});const N=new IntersectionObserver(H,{root:null,threshold:.2});N.observe(l.reviewsSection);async function F(){return g.defaults.baseURL="https://portfolio-js.b.goit.study/api",(await g.get("/reviews")).data}function V(e){e.isBeginning?l.prevButton.setAttribute("disabled","true"):l.prevButton.removeAttribute("disabled"),e.isEnd?l.nextButton.setAttribute("disabled","true"):l.nextButton.removeAttribute("disabled")}function _({author:e,avatar_url:n,_id:s,review:r}){return`<li class="reviews-card-item swiper-slide"
                tabindex="${s-1}"
                aria-label="review ${s}"
              >
                <img
                  class="reviews-card-image"
                  src="${n}"
                  alt="photo of ${e}"
                  width="48"
                  height="48"
                />
                <h3 class="reviews-card-heading">${e}</h3>
                <p class="reviews-card-text">${r}</p>`}function z(e){return e.map(_).join("")}function D(e){const n=z(e);l.reviewsList.innerHTML=n}function L(){l.stubReviews.classList.remove("visually-hidden")}function H(e,n){e.forEach(s=>{s.isIntersecting&&(n.disconnect(),M&&m.error({position:"topRight",message:"Server not responding, please try later"}),O&&m.info({position:"topRight",message:"We're sorry, there are no reviews yet"}))})}const J="/project-JS-Geeks/assets/sprite-BJEWnD_I.svg",o={form:document.querySelector(".js-form"),modalBackdrop:document.querySelector(".js-modal-backdrop"),modalWindow:document.querySelector(".js-modal-window"),closeModalButton:document.querySelector(".jd-modal-close-button"),emailInput:document.querySelector(".js-email"),commentInput:document.querySelector(".js-comment"),successMessage:document.querySelector(".js-success-message"),errorMessage:document.querySelector(".js-error-messasge")};o.form.addEventListener("input",Y);o.form.addEventListener("submit",U);o.emailInput.addEventListener("input",Q);o.commentInput.addEventListener("input",X);o.commentInput.addEventListener("blur",y);o.commentInput.addEventListener("focus",le);window.addEventListener("resize",()=>{clearTimeout(B),B=setTimeout(()=>{o.commentInput.value=c,y()},0)});o.modalWindow.addEventListener("click",e=>{e.target.closest(".js-modal-close-button")&&w()});o.modalBackdrop.addEventListener("click",e=>{e.target===e.currentTarget&&w()});document.addEventListener("DOMContentLoaded",()=>{G(),y()});let B;const K=2,p="form-storage-key";var q;let c=((q=P(p))==null?void 0:q.comment)||"";function Y(e){const n=e.currentTarget.elements["user-email"].value.trim(),s=e.currentTarget.elements["user-comment"].value.trim();ee(p,{email:n,comment:s})}function G(){const e=P(p);o.form.elements["user-email"].value=(e==null?void 0:e.email)||"",o.form.elements["user-comment"].value=(e==null?void 0:e.comment)||"",c=(e==null?void 0:e.comment)||""}async function U(e){e.preventDefault();const n=e.target.elements["user-email"].value.trim(),s=e.target.elements["user-comment"].value.trim();if(!n||!s){m.error({position:"topRight",message:"Please complete the field"});return}const r={email:n,comment:c};try{const t=await Z(r),i=ue(t);o.modalWindow.innerHTML=i,t&&(v(),h(),te(),e.target.reset(),localStorage.removeItem(p),c="")}catch(t){m.error({position:"topRight",message:"Something went wrong. Please, try again"}),console.log(t)}}function Q(){const e=this.value,n=this.getAttribute("pattern"),r=new RegExp(n).test(this.value);if(e.length===0){v(),h(),b(),k();return}r?(se(),h()):(v(),re())}function X(){if(c=o.commentInput.value.trim(),c.length===0){A(),I();return}c.length<K?ae():(I(),ce())}async function Z({email:e,comment:n}){const s="https://portfolio-js.b.goit.study/api/requests",r={email:e,comment:n};try{return(await g.post(s,r)).data}catch(t){console.log(t)}}function ee(e,n){const s=JSON.stringify(n);localStorage.setItem(e,s)}function P(e){const n=localStorage.getItem(e);try{return JSON.parse(n)}catch{return n}}function te(){o.modalBackdrop.classList.add("is-open"),document.addEventListener("keydown",$),oe(),b(),A()}function w(){o.modalBackdrop.classList.remove("is-open"),document.removeEventListener("keydown",$),ne()}function $(e){e.key==="Escape"&&w()}function oe(){const e=window.innerWidth,n=document.documentElement.clientWidth,s=e-n;document.body.style.paddingRight=`${s}px`,document.body.style.overflow="hidden"}function ne(){document.body.style.paddingRight="",document.body.style.overflow=""}function se(){o.successMessage.classList.remove("fade-out"),o.successMessage.classList.add("fade-in"),W()}function v(){o.successMessage.classList.remove("fade-in"),o.successMessage.classList.add("fade-out"),b()}function re(){o.errorMessage.classList.remove("fade-out"),o.errorMessage.classList.add("fade-in"),ie()}function h(){o.errorMessage.classList.remove("fade-in"),o.errorMessage.classList.add("fade-out"),k(),W()}function W(){o.emailInput.style.borderColor="#3cbc81"}function b(){o.emailInput.style.borderColor=""}function ie(){o.emailInput.style.borderColor="#e74a3b"}function k(){o.emailInput.style.borderColor=""}function ce(){o.commentInput.style.borderColor="#3cbc81"}function A(){o.commentInput.style.borderColor=""}function ae(){o.commentInput.style.borderColor="#e74a3b"}function I(){o.commentInput.style.borderColor=""}function x(e,n){const r=document.createElement("canvas").getContext("2d");return r.font=n,r.measureText(e).width}function y(){const e=o.commentInput;if(!e||e.offsetWidth===0)return;const n=e.getBoundingClientRect().width,s=window.getComputedStyle(e),r=s.fontWeight,t=s.fontSize,i=s.fontFamily,a=`${r} ${t} ${i}`;let S=x(e.value.trim(),a);const f=12;if(S>n-f){let u=o.commentInput.value.trim();for(;x(u+"...",a)>n-f&&u.length>0;)u=u.slice(0,-1);o.commentInput.value=u+"..."}else o.commentInput.value=c}function le(){o.commentInput.value&&(o.commentInput.value=c)}function ue({title:e,message:n}){return`<button class="modal-close-button js-modal-close-button" type="submit">
            <svg class="icon-modal-close" width="24" height="24">
                 <use xlink:href="${J}#x"></use>
            </svg>
        </button>
        <h2 class="modal-title">${e}</h2>
        <p class="modal-text">${n}</p>`}
//# sourceMappingURL=index.js.map
