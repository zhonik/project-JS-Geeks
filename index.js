import{S as b,N as h,K as y,a as m,i as l}from"./assets/vendor-BvPA-ZqM.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function r(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(t){if(t.ep)return;t.ep=!0;const o=r(t);fetch(t.href,o)}})();const u={prevButton:document.querySelector(".projects-btn.swiper-button-prev"),nextButton:document.querySelector(".projects-btn.swiper-button-next"),projectsBtnBox:document.querySelector(".projects-btn-box")};new b(".projects-container.swiper",{modules:[h,y],slidesPerView:1,speed:1e3,loop:!1,navigation:{nextEl:".projects-btn.swiper-button-next",prevEl:".projects-btn.swiper-button-prev"},spaceBetween:32,keyboard:{enabled:!0,onlyInViewport:!0},on:{init:w,slideChange:w}});u.projectsBtnBox.addEventListener("mousedown",e=>{e.target!==e.currentTarget&&setTimeout(()=>e.target.closest("button").blur(),0)});function w(e){e.isBeginning?u.prevButton.setAttribute("disabled","true"):u.prevButton.removeAttribute("disabled"),e.isEnd?u.nextButton.setAttribute("disabled","true"):u.nextButton.removeAttribute("disabled")}const a={reviewsList:document.querySelector(".reviews-card-list"),stubReviews:document.querySelector(".reviews-not-found"),reviewsSection:document.querySelector(".reviews"),prevButton:document.querySelector(".reviews-button.swiper-button-prev"),nextButton:document.querySelector(".reviews-button.swiper-button-next"),reviewsBtnBox:document.querySelector(".reviews-btn-box")};let L=!1,S=!1;a.reviewsBtnBox.addEventListener("mousedown",e=>{e.target!==e.currentTarget&&setTimeout(()=>e.target.closest("button").blur(),0)});const B=new b(".reviews-card-container.swiper",{modules:[h,y],slidesPerView:1,speed:1e3,navigation:{nextEl:".reviews-button.swiper-button-next",prevEl:".reviews-button.swiper-button-prev"},spaceBetween:16,breakpoints:{768:{slidesPerView:2},1440:{slidesPerView:4}},keyboard:{enabled:!0,onlyInViewport:!0},on:{slideChange:function(){I(B)}}});j().then(e=>{!e||e.length===0?(g(),S=!0):(T(e),B.update())}).catch(()=>{g(),L=!0});const M=new IntersectionObserver(k,{root:null,threshold:.2});M.observe(a.reviewsSection);async function j(){return m.defaults.baseURL="https://portfolio-js.b.goit.study/api",(await m.get("/reviews")).data}function I(e){e.isBeginning?a.prevButton.setAttribute("disabled","true"):a.prevButton.removeAttribute("disabled"),e.isEnd?a.nextButton.setAttribute("disabled","true"):a.nextButton.removeAttribute("disabled")}function q({author:e,avatar_url:n,_id:r,review:i}){return`<li class="reviews-card-item swiper-slide"
                tabindex="${r-1}"
                aria-label="review ${r}"
              >
                <img
                  class="reviews-card-image"
                  src="${n}"
                  alt="photo of ${e}"
                  width="48"
                  height="48"
                />
                <h3 class="reviews-card-heading">${e}</h3>
                <p class="reviews-card-text">${i}</p>`}function R(e){return e.map(q).join("")}function T(e){const n=R(e);a.reviewsList.innerHTML=n}function g(){a.stubReviews.classList.remove("visually-hidden")}function k(e,n){e.forEach(r=>{r.isIntersecting&&(n.disconnect(),L&&l.error({position:"topRight",message:"Server not responding, please try later"}),S&&l.info({position:"topRight",message:"We're sorry, there are no reviews yet"}))})}const P="/project-JS-Geeks/assets/sprite-BlG_KgII.svg",s={form:document.querySelector(".js-form"),modalBackdrop:document.querySelector(".js-modal-backdrop"),modalWindow:document.querySelector(".js-modal-window"),closeModalButton:document.querySelector(".jd-modal-close-button"),emailInput:document.querySelector(".js-email"),commentInput:document.querySelector(".js-comment"),successMessage:document.querySelector(".js-success-message"),errorMessage:document.querySelector(".js-error-messasge")};s.form.addEventListener("submit",N);s.emailInput.addEventListener("input",$);s.commentInput.addEventListener("input",A);s.commentInput.addEventListener("blur",x);s.commentInput.addEventListener("focus",K);window.addEventListener("resize",z);s.modalWindow.addEventListener("click",e=>{e.target.closest(".js-modal-close-button")&&v()});s.modalBackdrop.addEventListener("click",e=>{e.target===e.currentTarget&&v()});let c="";async function N(e){e.preventDefault();const n=e.target.elements["user-email"].value.trim(),r=e.target.elements["user-comment"].value.trim();if(!n||!r){l.info({message:"Please complete the field"});return}const i={email:n,comment:c};try{const t=await O(i),o=D(t);s.modalWindow.innerHTML=o,t&&(p(),f(),C(),e.target.reset())}catch(t){l.error({message:"Something went wrong. Please, try again"}),console.log(t)}}function $(){const e=this.value,r=new RegExp(this.getAttribute("pattern")).test(this.value);if(e.length===0){p(),f();return}r?(V(),f()):(p(),W())}function A(){c=s.commentInput.value}async function O({email:e,comment:n}){const r="https://portfolio-js.b.goit.study/api/requests",i={email:e,comment:n};try{return(await m.post(r,i)).data}catch(t){console.log(t)}}function C(){s.modalBackdrop.classList.add("is-open"),document.addEventListener("keydown",E),document.body.style.overflow="hidden"}function v(){s.modalBackdrop.classList.remove("is-open"),document.removeEventListener("keydown",E),document.body.style.overflow="auto"}function E(e){e.key==="Escape"&&v()}function V(){s.successMessage.classList.remove("fade-out"),s.successMessage.classList.add("fade-in")}function p(){s.successMessage.classList.remove("fade-in"),s.successMessage.classList.add("fade-out")}function W(){s.errorMessage.classList.remove("fade-out"),s.errorMessage.classList.add("fade-in")}function f(){s.errorMessage.classList.remove("fade-in"),s.errorMessage.classList.add("fade-out")}function F(e,n){if(e.length>n){const r=n-3;return e.slice(0,r)+"..."}return e}function _(){const e=window.innerWidth;if(e>=320&&e<=767)return 36;if(e>=768&&e<=1440)return 30;if(e>=1440)return 44}function z(){document.activeElement!==s.commentInput&&x()}function x(){if(!c)return;const e=_();c.length>e&&(s.commentInput.value=F(c,e))}function K(){s.commentInput.value=c}function D({title:e,message:n}){return`<button class="modal-close-button js-modal-close-button" type="submit">
            <svg class="icon-modal-close" width="24" height="24">
                 <use xlink:href="${P}#x"></use>
            </svg>
        </button>
        <h2 class="modal-title">${e}</h2>
        <p class="modal-text">${n}</p>`}
//# sourceMappingURL=index.js.map
